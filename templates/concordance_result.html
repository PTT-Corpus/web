{% extends 'base.html' %}
{% load paging %}

{% block extra_css %}
<style>
em {
  color: red;
  font-weight: bold;
}
.info {
  font-size: 10px;
}
.info .material-icons {
  font-size: 14px;
}
</style>
{% endblock extra_css %}

{% block main_title %}
Concordance
{% endblock main_title%}

{% block main_content %}
<br>
<h5>Total Counts: {{ data.total }}</h5>
<hr>


{% for d in data.data %}
<div class="row">
  <div class="col s4 m4 right-align">
    {{ d.concordance.0 }} 
  </div>
  <div class="col s1 m1 center-align">
    {{ d.concordance.1|safe }} 
  </div>
  <div class="col s4 m4 left-align">
    {{ d.concordance.2 }} 
  </div>
  <div class="info col s3 m3 right-align">
    <div class="row">
      <div class="col s2 m2">
        <span class="new badge blue">{{ d.board }}</span> 
      </div>
      <div class="col s1 m1">
        <i class="material-icons">thumb_up</i>
      </div>
      <div class="col s1 m1">
        {{ d.upvote }}
      </div>
      <div class="col s1 m1">
        <i class="material-icons">thumb_down</i>
      </div>
      <div class="col s1 m1">
        {{ d.downvote }}
      </div>
      <div class="col s1 m1">
        <i class="material-icons">arrow_forward</i>
      </div>
      <div class="col s1 m1">
        {{ d.novote }}
      </div>
      <div class="col s1 m1">
        <a href="https://www.ptt.cc/bbs/{{ d.board }}/{{ d.id }}.html" target="_blank">
          <i class="material-icons">link</i>
        </a>
      </div>
    </div>
  </div>
</div>
{% endfor %}

<br>
{% paginator as pages %}
{% paging_prev as pp %}
{% paging_next as pg %}
<ul class="pagination center-align">
  <li class="{% if pp is None %}disabled{% else %}waves-effect{% endif %}">
    <a href="javascript:;" onclick="paginator({{ pp }})"><i class="material-icons">chevron_left</i></a>
  </li>
  {% for page in pages %}
    <li class="waves-effect {% if data.page == page %}active{% endif %}">
      <a href="javascript:;" onclick="paginator({{ page }});">{{ page|add:1 }}</a>
    </li>
  {% endfor %}
  <li class="{% if pg is None %}disabled{% else %}waves-effect{% endif %}">
    <a href="javascript:;" onclick="paginator({{ pg }})"><i class="material-icons">chevron_right</i></a>
  </li>
</ul>

<form method="post" class="hide" id="_form">
  {% csrf_token %}
  {{ form }}
</form>
{% endblock main_content %}

{% block extra_js %}
<script>
function paginator(page) {
  document.getElementById("{{ form.page.auto_id }}").value = page;
  document.getElementById("_form").submit();
};
</script>
{% endblock extra_js %}
